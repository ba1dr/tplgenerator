#!/bin/bash
# Build <%= @project_name %>

PYTHON=$WORK_DIR/venv/bin/python

CUR_DIR=$(dirname $(readlink -f $0))

cmd=$1; ! [ -z "$cmd" ] && shift
[ -z "$cmd" ] && cmd="dev"
param1=$1; ! [ -z "$param1" ] && shift

django_build() {
    # compile locales
    $PYTHON $CUR_DIR/manage.py compilemessages

    # collect static files
    $PYTHON $CUR_DIR/manage.py collectstatic --noinput
}

case $cmd in
dev)
    # build with gulp
    gulp build
 
    django_build
;;
prod)
    # build for production: minimize resource files
    gulp build --production

    django_build
;;
esac


