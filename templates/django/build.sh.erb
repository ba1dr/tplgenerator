#!/bin/bash
# Build <%= @project_name %>

PYTHON=/usr/bin/python3

CUR_DIR=$(dirname $(readlink -f $0))

cmd=$1; ! [ -z "$cmd" ] && shift
[ -z "$cmd" ] && cmd="dev"
param1=$1; ! [ -z "$param1" ] && shift

django_build() {
    # compile locales
    $PYTHON $CUR_DIR/manage.py compilemessages

    # collect static files
    $PYTHON $CUR_DIR/manage.py collectstatic --noinput
}

case $cmd in
dev)
    django_build

    # build with gulp
    gulp build
;;
prod)
    django_build

    # build for production: minimize resource files
    gulp build --production
;;
esac


